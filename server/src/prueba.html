<!DOCTYPE html>
<html>
  <head>
    <title>Integraci√≥n de Mercado Pago</title>
    <script src="https://www.mercadopago.com/v2/security.js" defer></script>
  </head>
  <body>
    <h1>Pago con Mercado Pago</h1>
      <div>
          <h3 class="name">Pelicula</h3>
          <p class="price">$1000</p>
          <button id="checkout-btn">Comprar</button>
          <div id="wallet_container"></div>
        </form>
    </div>
  </body>
  <script>
    const mp = new MercadoPago("Public_Key", {
      locale: "es-AR",
    });
    document
      .getElementById("checkout-btn")
      .addEventListener("click", async () => {
        try {
            
            const orderData = {
                title: document.querySelector(".name").innerText,
                quantity: 1,
                price: 1000,
            };
            const response = await fetch('http://localhost:3000/create-preference', {
                method: POST,
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(orderData),
            });
            const preference = await response.json
            createCheckoutButton(preference.id);
        } catch (error) {
           console.error("error", error.message)   
        }
        });
        </script>
</html>
